% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare.R
\name{prepare}
\alias{prepare}
\title{Prepare data with explicit, logged steps}
\usage{
prepare(spec, steps = list(), lock = FALSE)
}
\arguments{
\item{spec}{A \code{comp_spec} created by \code{\link[=comp_spec]{comp_spec()}}.}

\item{steps}{A list of step \emph{calls} (e.g., \code{\link[=step_trim_outliers]{step_trim_outliers()}}) to be
executed in order. Each step must return \code{list(df = ..., log = tibble)}.}

\item{lock}{Logical; if \code{TRUE}, attaches a digest for reproducibility checks
(reserved for a future release; currently informational only).}
}
\value{
The input \code{spec} with \code{data_prepared} and \code{prep_log} populated.
}
\description{
Apply a sequence of preparation steps to a \code{comp_spec}, recording each
step in a preparation log. Steps are small functions that take
\code{df} (a data frame) and \code{spec} and return a list with elements
\code{df} (the updated data) and \code{log} (a one‑row tibble describing the step).
}
\details{
The function updates:
\itemize{
\item \code{spec$data_prepared}: the resulting tibble after all steps.
\item \code{spec$prep_log}: a tibble accumulating one log row per step with
step‑specific metadata.
}

If no steps are provided, the raw data are passed through unchanged and a
message is emitted.
}
\examples{
spec <- comp_spec(mtcars)

# Remove extreme MPG outliers using the IQR rule (k = 3)
spec2 <- prepare(
  spec,
  steps = list(step_trim_outliers(var = mpg, method = "iqr", k = 3, action = "remove"))
)
spec2$prep_log
head(spec2$data_prepared)
}
